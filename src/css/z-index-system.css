/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Z-INDEX SYSTEM - the dark tower of stacking contexts
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Version: 0.89.9 | Unity AI Lab
   Creators: Hackall360, Sponge, GFourteen
   www.unityailab.com | github.com/Unity-Lab-AI/Medieval-Trading-Game
   unityailabcontact@gmail.com
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MASTER Z-INDEX REFERENCE - All z-index values in one place

   Layer 0    : Background effects (menu weather during setup)
   Layer 1-9  : Game world elements (map, locations)
   Layer 10-49: Game overlays (weather overlay in-game)
   Layer 50-99: UI Panels (side panel, location panel, message log)
   Layer 100-199: Floating panels (setup panel, quest tracker, draggable panels)
   Layer 200-499: Dropdowns, tooltips, popovers
   Layer 500-999: Modal backdrops
   Layer 1000-1999: Modals and overlays
   Layer 2000+: Critical UI (loading screen, error messages)

   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

:root {
    /* ğŸ–¤ LAYER 0: Background Effects */
    --z-background-effects: 1;

    /* ğŸ—ºï¸ LAYER 1-9: Game World Base */
    --z-game-map: 2;
    --z-map-connections: 3;

    /* ğŸŒ§ï¸ LAYER 10-19: Weather Overlays (BELOW map markers) */
    --z-day-night-overlay: 12;
    --z-weather-overlay: 15;

    /* ğŸ“ LAYER 20-40: Map Markers (ABOVE weather so they don't get rained on) */
    --z-map-locations: 25;
    --z-player-marker: 30;
    --z-map-labels: 28;

    /* ğŸ“¦ LAYER 50-99: Core UI Panels */
    --z-side-panel: 50;
    --z-location-panel: 55;
    --z-message-log: 60;
    --z-top-bar: 70;
    --z-bottom-bar: 70;

    /* ğŸ›ï¸ LAYER 100-199: Floating/Draggable Panels */
    --z-quest-tracker: 100;
    --z-people-panel: 110;
    --z-draggable-panel: 120;
    --z-setup-panel: 150;

    /* ğŸ’¬ LAYER 200-499: Tooltips & Dropdowns */
    --z-tooltip: 200;
    --z-dropdown: 250;
    --z-popover: 300;
    --z-context-menu: 350;

    /* ğŸ­ LAYER 500-999: Modal Backdrops */
    --z-modal-backdrop: 500;
    --z-overlay-container: 600;

    /* ğŸ“‹ LAYER 1000-1999: Modals */
    --z-modal: 1000;
    --z-modal-content: 1001;
    --z-perk-modal: 1100;
    --z-npc-chat: 1200;

    /* âš ï¸ LAYER 2000+: Critical/System UI */
    --z-loading-screen: 2000;
    --z-error-modal: 2500;
    --z-debooger-console: 3000;

    /* ğŸ–¤ LAYER 3000+: Above main menu (main-menu is 3001) */
    --z-settings-panel: 3100;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸŒ¦ï¸ MENU WEATHER - Shows behind setup panel
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* When menu weather container is moved to body during setup */
body > #menu-weather-container {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    z-index: var(--z-background-effects) !important;
    pointer-events: none !important;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ® GAME CONTAINER STATES
   ğŸ–¤ Using body classes instead of :has() for performance ğŸ’€
   Classes managed by JS: .state-setup, .state-menu, .state-loading, .state-playing
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* During setup - transparent background to show weather through */
body.state-setup #game-container {
    background: transparent !important;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ“¦ SETUP PANEL - Above weather, centered
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

#game-setup-panel {
    z-index: var(--z-setup-panel) !important;
    position: relative;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ™ˆ HIDE GAME UI DURING SETUP/MENU/LOADING
   ğŸ–¤ Replaced :has() with body state classes for O(1) performance ğŸ’€
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* Hide quest tracker */
body.state-setup .quest-tracker,
body.state-menu .quest-tracker,
body.state-loading .quest-tracker {
    display: none !important;
}

/* Hide game weather overlay (not menu weather) during setup */
body.state-setup #game-weather-overlay,
body.state-setup .weather-overlay,
body.state-menu #game-weather-overlay,
body.state-menu .weather-overlay,
body.state-loading #game-weather-overlay,
body.state-loading .weather-overlay {
    display: none !important;
}

/* Hide weather/time indicators during setup/menu */
body.state-setup #weather-indicator,
body.state-setup #time-phase-indicator,
body.state-menu #weather-indicator,
body.state-menu #time-phase-indicator,
body.state-loading #weather-indicator,
body.state-loading #time-phase-indicator {
    display: none !important;
}

/* Hide message log during setup */
body.state-setup #message-log {
    display: none !important;
}

/* Hide top bar during setup */
body.state-setup #top-bar {
    display: none !important;
}

/* Hide bottom bar during setup */
body.state-setup #bottom-action-bar {
    display: none !important;
}

/* Hide side panel during setup */
body.state-setup #side-panel {
    display: none !important;
}

/* Hide game world during setup */
body.state-setup #game-world {
    display: none !important;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ”§ APPLY Z-INDEX VALUES TO ELEMENTS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* Weather overlay in-game - MUST be below map markers and all panels */
.weather-overlay,
#game-weather-overlay {
    z-index: var(--z-weather-overlay) !important;
    isolation: isolate; /* ğŸ–¤ Prevent backdrop-filter from affecting panels */
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ“ MAP MARKERS - ABOVE weather so they don't get rained on or fogged out
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* Location markers sit ABOVE weather overlay */
.map-location {
    z-index: var(--z-map-locations) !important;
}

/* Location labels */
.map-location-label {
    z-index: var(--z-map-labels) !important;
}

/* Player marker always visible above everything on map */
.player-marker {
    z-index: var(--z-player-marker) !important;
}

/* Property markers */
.property-marker {
    z-index: var(--z-map-locations) !important;
}

/* Path connections stay below weather (they're part of the terrain) */
#game-world svg,
.map-connections {
    z-index: var(--z-map-connections) !important;
}

/* UI Panels container - ABOVE weather overlay */
#ui-panels {
    position: relative;
    z-index: var(--z-side-panel) !important; /* At least 50, above weather's 15 */
}

/* All panels should be above weather */
.panel,
#game-setup-panel,
#travel-panel,
#character-panel,
#inventory-panel,
#financial-panel,
#achievements-panel,
#properties-panel {
    z-index: var(--z-draggable-panel) !important; /* 120 - well above weather */
}

/* ğŸ–¤ Settings panel needs to be ABOVE main-menu (3001) so it shows on start screen */
#settings-panel {
    z-index: var(--z-settings-panel) !important; /* 3100 - above main menu */
}

/* Quest tracker */
.quest-tracker {
    z-index: var(--z-quest-tracker) !important;
}

/* Message log */
#message-log {
    z-index: var(--z-message-log) !important;
}

/* Location panel - fixed bottom-left, above weather */
#location-panel {
    z-index: var(--z-location-panel) !important;
}

/* Top bar */
#top-bar {
    z-index: var(--z-top-bar) !important;
}

/* Overlay container for modals */
#overlay-container {
    z-index: var(--z-overlay-container) !important;
}

/* Loading screen - always on top */
#loading-screen {
    z-index: var(--z-loading-screen) !important;
}

/* ğŸ¦‡ Debooger console - absolute top (inline styles take precedence) ğŸ’€ */
#debooger-console,
.debooger-console {
    z-index: 999998;
}

#toggle-debooger-console {
    z-index: 999999;
}
